<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>org.eclipse.objectteams</groupId>
		<artifactId>objectteams-parent-pom</artifactId>
		<version>2.7.6</version>
		<relativePath>../parent-pom</relativePath>
	</parent>

	<artifactId>objectteams-artifact-deployer</artifactId>
		
	<packaging>pom</packaging>

	<!-- simply repeat this declaration from the parent pom, otherwise Maven duplicates the artifactId in the path -->
	<url>http://download.eclipse.org/objectteams/maven/3/sites/${project.artifactId}</url>

	<description>This POM deploys Object Teams artifacts not generated by maven as maven artifacts.</description>
	
	<licenses>
		<license>
			<name>Eclipse Public License Version 1.0</name>
			<comments>
				This file is part of "Object Teams Development Tooling"-Software

				Copyright 2010, 2019 GK Software SE and others.
				This program and the accompanying materials
				are made available under the terms of the Eclipse Public License 2.0
				which accompanies this distribution, and is available at
				https://www.eclipse.org/legal/epl-2.0/
				
				SPDX-License-Identifier: EPL-2.0
				Please visit http://www.eclipse.org/objectteams for updates and contact.

				Contributors:
 					Olaf Otto - Initial concept
					Stephan Herrmann - Initial API and implementation
			</comments>
		</license>
	</licenses>

	<!--  the follogin properties should be defined by an active profile:    		  -->
	<!--  REMOTE:																	  -->
	<!--  ot.host : user@host for the object teams repository server                  -->
	<!--  ot.maven.repository.path : absolute path to the maven repository on ot.host -->
	<!--  LOCAL:																	  -->
	<!--  otre.export.dir : directory where exported otre jars are located:			  -->
	<!--					org.eclipse.objectteams.otre_${otre.version}.jar	 	  -->
	<!--					org.eclipse.objectteams.runtime_${otre.version}.jar	 	  -->
	<!-- 					otre_agent.jar											  -->
	<!--  ecj.export.dir : directory where the batch compiler jar is located          -->

	<properties>
		<!-- deploy using either scpexe or file protocol: -->
		<protocol>scpexe</protocol>

		<!-- Object Teams versions, update manually: 					-->
		<!--   version of the signed ecotj jar file:	 				-->
		<ecotj.version>R-2.7.6-201912070821-signed</ecotj.version>
		<export.version>2.7.6.201912111741</export.version>
		<!--   version of the org.eclipse.objectteams.runtime plugin:	-->
		<otre.version>2.7.0.201806120901</otre.version>
		<otruntime.version>2.7.3.201903120955</otruntime.version>
		<!--   version of the org.eclipse.objectteams.otredyn plugin:	-->
		<otredyn.version>1.3.7.201912111741</otredyn.version>
		
		<!-- locate the jar files to install/deploy: -->
		<ecotj.jar.file>${ecj.export.dir}/ecotj-${ecotj.version}.jar</ecotj.jar.file>
		<otre.jar.file>${otre.export.dir}-${export.version}/org.eclipse.objectteams.otre_${otre.version}.jar</otre.jar.file>
		<ot.runtime.jar.file>${otre.export.dir}-${export.version}/org.eclipse.objectteams.runtime_${otruntime.version}.jar</ot.runtime.jar.file>
		<otre-agent.jar.file>${otre.export.dir}-${export.version}/otre_agent.jar</otre-agent.jar.file>
		<otdre.jar.file>${otre.export.dir}-${export.version}/org.eclipse.objectteams.otredyn_${otredyn.version}.jar</otdre.jar.file>
		<otdre-agent.jar.file>${otre.export.dir}-${export.version}/otredyn_agent.jar</otdre-agent.jar.file>

		<!-- Repository path of this module within the Object Teams git: -->
		<project-repository-path>maven/infrastructure/artifacts-deployer</project-repository-path>
	</properties>

    <!-- Override inherited declaration, otherwise Maven appends the artifactId to the path -->
	<scm>
	    <connection>scm:git:git://git.eclipse.org/gitroot/objectteams/org.eclipse.objectteams.git/${project-repository-path}</connection>
	    <developerConnection>scm:git:ssh://${username}@git.eclipse.org/gitroot/objectteams/org.eclipse.objectteams.git/${project-repository-path}</developerConnection>
	    <url>http://git.eclipse.org/c/objectteams/org.eclipse.objectteams.git/${project-repository-path}</url>
	</scm>
	
	<!-- simply repeat this declaration from the parent pom, otherwise Maven duplicates the artifactId in the path -->
	<distributionManagement>
		<site>
			<id>otSiteRepo</id>
			<name>Object Teams sites repository for Maven 3</name>
			<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/sites/${project.artifactId}</url>
		</site>
	</distributionManagement>

	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-deploy-plugin</artifactId>
				<version>3.0.0-M1</version>
				<executions>
					<execution>
						<id>deploy-ot-runtime-as-maven-artifact</id>
						<phase>deploy</phase>
						<goals>
							<goal>deploy-file</goal>
						</goals>
						<configuration>
							<repositoryId>otEclipseRepo</repositoryId>
							<packaging>jar</packaging>
							<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/repository</url>
							<!-- The file to be deployed -->
							<file>${ot.runtime.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-runtime</artifactId>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
					<execution>
						<id>deploy-otre-as-maven-artifact</id>
						<phase>deploy</phase>
						<goals>
							<goal>deploy-file</goal>
						</goals>
						<configuration>
							<repositoryId>otEclipseRepo</repositoryId>
							<packaging>jar</packaging>
							<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/repository</url>
							<!-- The file to be deployed -->
							<file>${otre.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otre</artifactId>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
							<pomFile>objectteams-otre-pom.xml</pomFile>
						</configuration>
					</execution>
					<execution>
						<id>deploy-otre-agent-as-maven-artifact</id>
						<phase>deploy</phase>
						<goals>
							<goal>deploy-file</goal>
						</goals>
						<configuration>
							<repositoryId>otEclipseRepo</repositoryId>
							<packaging>jar</packaging>
							<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/repository</url>
							<!-- The file to be deployed -->
							<file>${otre-agent.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otre-agent</artifactId>
							<classifier>nodep</classifier>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
					<execution>
						<id>deploy-otdre-as-maven-artifact</id>
						<phase>deploy</phase>
						<goals>
							<goal>deploy-file</goal>
						</goals>
						<configuration>
							<repositoryId>otEclipseRepo</repositoryId>
							<packaging>jar</packaging>
							<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/repository</url>
							<!-- The file to be deployed -->
							<file>${otdre.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otdre</artifactId>
							<version>${otdre.version}</version>
							<packaging>jar</packaging>
							<pomFile>objectteams-otdre-pom.xml</pomFile>
						</configuration>
					</execution>
					<execution>
						<id>deploy-otdre-agent-as-maven-artifact</id>
						<phase>deploy</phase>
						<goals>
							<goal>deploy-file</goal>
						</goals>
						<configuration>
							<repositoryId>otEclipseRepo</repositoryId>
							<packaging>jar</packaging>
							<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/repository</url>
							<!-- The file to be deployed -->
							<file>${otdre-agent.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otdre-agent</artifactId>
							<classifier>nodep</classifier>
							<version>${otdre.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
					<execution>
						<id>deploy-ecotj-as-maven-artifact</id>
						<phase>deploy</phase>
						<goals>
							<goal>deploy-file</goal>
						</goals>
						<configuration>
							<repositoryId>otEclipseRepo</repositoryId>
							<packaging>jar</packaging>
							<url>${protocol}://${ot.host}:${ot.maven.repository.basepath}/repository</url>
							<!-- The file to be deployed -->
							<file>${ecotj.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otj-compiler</artifactId>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
				</executions>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-install-plugin</artifactId>
				<version>3.0.0-M1</version>
				<executions>
					<execution>
						<id>install-ot-runtime-as-maven-artifact</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<packaging>jar</packaging>
							<!-- The file to be deployed -->
							<file>${ot.runtime.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-runtime</artifactId>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
					<execution>
						<id>install-otre-as-maven-artifact</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<packaging>jar</packaging>
							<!-- The file to be deployed -->
							<file>${otre.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otre</artifactId>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
							<pomFile>objectteams-otre-pom.xml</pomFile>
						</configuration>
					</execution>
					<execution>
						<id>install-otre-agent-as-maven-artifact</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<packaging>jar</packaging>
							<!-- The file to be deployed -->
							<file>${otre-agent.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otre-agent</artifactId>
							<classifier>nodep</classifier>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
					<execution>
						<id>install-otdre-as-maven-artifact</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<packaging>jar</packaging>
							<!-- The file to be deployed -->
							<file>${otdre.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otdre</artifactId>
							<version>${otdre.version}</version>
							<packaging>jar</packaging>
							<pomFile>objectteams-otdre-pom.xml</pomFile>
						</configuration>
					</execution>
					<execution>
						<id>install-otdre-agent-as-maven-artifact</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<packaging>jar</packaging>
							<!-- The file to be deployed -->
							<file>${otdre-agent.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otdre-agent</artifactId>
							<classifier>nodep</classifier>
							<version>${otdre.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
					<execution>
						<id>install-ecotj-as-maven-artifact</id>
						<phase>install</phase>
						<goals>
							<goal>install-file</goal>
						</goals>
						<configuration>
							<packaging>jar</packaging>
							<!-- The file to be deployed -->
							<file>${ecotj.jar.file}</file>
							<groupId>${project.groupId}</groupId>
							<artifactId>objectteams-otj-compiler</artifactId>
							<version>${otj.version}</version>
							<packaging>jar</packaging>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-site-plugin</artifactId>
				<version>3.8.2</version>
				<configuration>
					<skip>true</skip>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-deploy-plugin</artifactId>
				<version>2.7</version>
				<configuration>
					<skip>true</skip>
				</configuration>
			</plugin>
		</plugins>
	</build>	
</project>
